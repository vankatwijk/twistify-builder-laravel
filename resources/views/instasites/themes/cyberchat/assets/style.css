/* ============ Base ============ */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size:clamp(16px,1.02vw,18px); line-height:1.65;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
:focus-visible{ outline:2px solid var(--ring); outline-offset:2px; border-radius:8px }
.container{ margin-inline:auto }

/* ============ Top Bar (flat, compact) ============ */
.gen-header{
  position:sticky; top:0; z-index:120;
  background:var(--bg);
  border-bottom:1px solid var(--outline-weak);
}
.gen-nav{
  height:56px; display:flex; align-items:center; gap:12px; padding:0 0;
}
.gen-logo{ display:inline-flex; align-items:center; gap:10px; text-decoration:none }
.gen-logo-dot{ width:22px; height:22px; border-radius:6px; background:var(--primary) }
.gen-logo-text{ font-weight:700; letter-spacing:.1px; color:var(--text) }

.nav-desktop{ display:flex; gap:6px; align-items:center; margin-left:auto }
.nav-mobile{ display:none }
.gen-link{
  padding:8px 10px; border-radius:8px; text-decoration:none; color:var(--text);
  border:1px solid transparent; font-weight:600
}
.gen-link:hover{ background:rgba(255,255,255,.04); border-color:var(--outline-weak) }
.gen-cta{
  padding:8px 12px; border-radius:8px; text-decoration:none; font-weight:700;
  background:var(--primary); color:#0c1215;
  border:1px solid color-mix(in srgb, var(--primary) 70%, black 30%);
}

/* ============ Main Shell (left rail + content) ============ */
.gen-main.container{
  display:grid;
  grid-template-columns:260px 1fr;   /* narrower rail, room for chat col */
  gap:16px; align-items:start; padding:14px 0 28px;
}

/* ============ Sidebar (ChatGPT rail) ============ */
.gen-side{}
.side-desktop{
  position:sticky; top:64px;
  display:flex; flex-direction:column; gap:10px;
  height:calc(100dvh - 72px);
  background:var(--panel-2);
  border:1px solid var(--outline-weak);
  border-radius:var(--r-lg);
  padding:10px; overflow:auto;
}
.side-top{ padding:2px }
.side-bottom{ margin-top:auto; display:flex; flex-direction:column; gap:6px; padding:2px }

.side-new{
  display:block; text-align:center; font-weight:700; text-decoration:none;
  padding:9px 10px; border-radius:8px; background:var(--panel-3); color:var(--text);
  border:1px solid var(--outline); transition:background .15s ease, border-color .15s ease;
}
.side-new:hover{ background:color-mix(in srgb, var(--panel-3) 92%, white 8%); border-color:var(--outline) }

.chat-list{ display:flex; flex-direction:column; gap:4px }
.chat-item{
  display:grid; grid-template-columns:10px 1fr auto; align-items:center; gap:10px;
  padding:8px 10px; border-radius:8px; text-decoration:none; color:var(--text);
  border:1px solid transparent;
}
.chat-item:hover{ background:rgba(255,255,255,.04); border-color:var(--outline-weak) }
.chat-dot{ width:10px; height:10px; border-radius:50%; background:var(--primary) }
.chat-title{ font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.chat-meta{ color:var(--muted); font-size:.85em; margin-left:6px }
.chat-empty{ padding:10px; display:block; color:var(--muted) }

.side-link{
  display:block; padding:8px 10px; border-radius:8px; text-decoration:none; color:var(--text);
  border:1px solid transparent
}
.side-link:hover{ background:rgba(255,255,255,.04); border-color:var(--outline-weak) }

/* Mobile drawer (no JS) */
.side-mobile{ display:none }
@media (max-width:900px){
  .gen-main.container{ grid-template-columns:1fr }
  .side-desktop{ display:none }
  .side-mobile{ display:block; margin-bottom:10px }
  .side-toggle{
    list-style:none; display:inline-flex; align-items:center; gap:10px;
    border:1px solid var(--outline-weak); background:var(--panel-2);
    border-radius:8px; padding:10px 12px; cursor:pointer; user-select:none
  }
  .side-toggle::-webkit-details-marker{ display:none }
  .side-toggle .burger{ width:18px; height:2px; background:var(--text); border-radius:2px; display:block }
  .side-toggle .burger + .burger{ margin-top:4px }
  .side-mobile[open] .side-toggle{ border-color: color-mix(in srgb, var(--primary) 35%, transparent) }
  .side-panel{
    position:fixed; top:0; left:0; bottom:0; width:min(86vw, 360px);
    padding:64px 14px 14px; display:flex; flex-direction:column; gap:10px;
    background:var(--panel-2); border-right:1px solid var(--outline-weak);
    box-shadow:22px 0 40px rgba(0,0,0,.35);
    transform:translateX(-100%); transition:transform .2s ease; z-index:1000; overflow:auto;
  }
  .side-mobile[open] .side-panel{ transform:translateX(0) }
  .side-mobile::before{
    content:""; position:fixed; inset:0; z-index:999; background:rgba(0,0,0,.45);
    backdrop-filter:blur(2px); opacity:0; pointer-events:none; transition:opacity .2s ease
  }
  .side-mobile[open]::before{ opacity:1; pointer-events:auto }
}

/* ============ Chat Pane (centered narrow column) ============ */
.gen-card{
  background:var(--panel);
  border:1px solid var(--outline-weak);
  border-radius:var(--r-lg);
  padding:0; overflow:hidden;
  min-height:60dvh;
}

/* Header strip inside the chat pane (optional) */
.chat-pane-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:10px 14px; border-bottom:1px solid var(--outline-weak); background:var(--panel);
  color:var(--muted); font-size:.95em;
}

/* Scroll + centered chat column */
.chat-scroll{
  max-height:calc(100dvh - 180px);
  overflow:auto; padding:14px 0;
}
.chat-col{
  width:min(760px, 92%); margin:0 auto; display:flex; flex-direction:column; gap:8px;
}

/* Message blocks (subtle, compact) */
.bubble{
  display:grid; grid-template-columns:32px 1fr; gap:10px;
  padding:14px; border-radius:10px;
  border:1px solid var(--outline-weak);
  background:var(--panel-3);
}
.bubble + .bubble{ margin-top:8px }
.bubble .avatar{
  width:32px; height:32px; border-radius:8px; background:var(--primary);
}
.bubble .content p{ margin:0 0 .85rem; max-width:75ch }
.bubble .content a{ color:var(--link) }

/* Roles (assistant has slight tint, user more neutral) */
.bubble.assistant{ background:color-mix(in srgb, var(--panel-3) 92%, #16a37f 8%); border-color:rgba(16,163,127,.18) }
.bubble.user{ background:var(--panel-3) }

/* Code / pre (ChatGPT-like) */
.bubble pre, .content-default pre{
  background:#0a0b0f; color:#e6e7ea; border:1px solid var(--outline);
  border-radius:8px; padding:12px; overflow:auto; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size:.92em; line-height:1.6;
}
.bubble code, .content-default code{
  background:#0a0b0f; padding:.15em .35em; border-radius:6px; border:1px solid var(--outline);
}

/* Blockquote (left rule like ChatGPT) */
.bubble blockquote, .content-default blockquote{
  border-left:3px solid var(--outline); margin:0 0 1rem; padding:.2rem 0 .2rem .9rem; color:var(--muted);
}

/* Images */
.gen-post img, .bubble img{
  max-width:100%; height:auto; border-radius:10px; border:1px solid var(--outline-weak)
}

/* ============ Standard page/post mode (when not chat) ============ */
.gen-card .content-default{ padding:18px 0 24px }
.gen-card .content-default > *{ width:min(760px,92%); margin:0 auto }
.gen-card .content-default h1{ font-size:var(--fs-h1); line-height:1.2; margin:.6em 0 .4em }
.gen-card .content-default h2{ font-size:var(--fs-h2); margin:.8em 0 .4em }
.gen-card .content-default h3{ font-size:var(--fs-h3); margin:.8em 0 .3em }
.gen-card .content-default p{ max-width:75ch; margin:0 0 1.05rem }
.gen-card .content-default a{ color:var(--link) }

/* Lists (block-style per your spec) */
.gen-card ul,.gen-card ol{ list-style:none; padding:0; display:grid; gap:12px; margin:0 0 1rem }
.gen-card li{
  position:relative; padding:12px 14px 12px 42px; background:color-mix(in srgb, var(--panel-3) 92%, black 0%);
  border:1px solid var(--outline-weak); border-radius:10px
}
.gen-card li::before{
  content:""; position:absolute; left:14px; top:50%; transform:translateY(-50%);
  width:10px; height:10px; border-radius:50%; background:var(--primary);
  box-shadow:0 0 0 3px rgba(16,163,127,.18)
}

/* ============ Footer ============ */
.gen-footer{ margin:24px 0 36px }
.gen-footer-inner{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding-top:10px; border-top:1px solid var(--outline-weak); color:var(--muted); font-size:.95em
}
